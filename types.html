<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Types &mdash; Rule Engine 4.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Attributes" href="attributes.html" />
    <link rel="prev" title="Rule Syntax" href="syntax.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Rule Engine
          </a>
              <div class="version">
                4.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax.html">Rule Syntax</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compound-types">Compound Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#float">FLOAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function">FUNCTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timedelta">TIMEDELTA</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributes.html">Data Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="rule_engine/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rule_engine</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="debug_repl.html">Debug REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="change_log.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rule Engine</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data Types</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/types.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-types">
<h1>Data Types<a class="headerlink" href="#data-types" title="Permalink to this heading"></a></h1>
<p>The following table describes the data types supported by the Rule Engine and the Python data types that each is
compatible with. For a information regarding supported operations, see the
<a class="reference internal" href="syntax.html#data-type-operations"><span class="std std-ref">Supported Operations</span></a> table.</p>
<table class="docutils align-default" id="id1">
<tbody>
<tr class="row-odd"><td><p>Rule Engine Data Type</p></td>
<td><p>Compatible Python Types</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.ARRAY" title="rule_engine.types.DataType.ARRAY"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ARRAY</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.11/library/stdtypes.html#tuple" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.BOOLEAN" title="rule_engine.types.DataType.BOOLEAN"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BOOLEAN</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.DATETIME" title="rule_engine.types.DataType.DATETIME"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DATETIME</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/datetime.html#datetime.date" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.11/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.FLOAT" title="rule_engine.types.DataType.FLOAT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FLOAT</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.11/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>
<a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.FUNCTION" title="rule_engine.types.DataType.FUNCTION"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FUNCTION</span></code></a></p></td>
<td><p><em>anything callable</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.NULL" title="rule_engine.types.DataType.NULL"><code class="xref py py-attr docutils literal notranslate"><span class="pre">NULL</span></code></a></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">NoneType</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.SET" title="rule_engine.types.DataType.SET"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SET</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/stdtypes.html#set" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.STRING" title="rule_engine.types.DataType.STRING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">STRING</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.TIMEDELTA" title="rule_engine.types.DataType.TIMEDELTA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TIMEDELTA</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.11/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a></p></td>
</tr>
</tbody>
</table>
<section id="compound-types">
<h2>Compound Types<a class="headerlink" href="#compound-types" title="Permalink to this heading"></a></h2>
<p>The compound data types (<a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.ARRAY" title="rule_engine.types.DataType.ARRAY"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ARRAY</span></code></a>, <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.SET" title="rule_engine.types.DataType.SET"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SET</span></code></a>, and <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a>) are all
capable of containing zero or more values of other data types (though it should be noted that
<a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a> keys <strong>must be scalars</strong> while the values can be anything). The member types of compound
data types can be defined, but only if the members are all of the same type. For an example, an array containing floats
can be defined, and an mapping with string keys to string values can also be defined, but a mapping with string keys to
values that are either floats, strings or booleans <strong>may not be completely defined</strong>. For more information, see the
section on <a class="reference internal" href="getting_started.html#getting-started-compound-data-types"><span class="std std-ref">Compound Data Types</span></a> in the Getting Started page.</p>
<p>Compound data types are also iterable, meaning that array comprehension operations can be applied to them. Iteration
operations apply to the members of <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.ARRAY" title="rule_engine.types.DataType.ARRAY"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ARRAY</span></code></a> and <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.SET" title="rule_engine.types.DataType.SET"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SET</span></code></a> values, and the keys of
<a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a> values. This allows the types to behave in the same was as they do in Python.</p>
</section>
<section id="float">
<h2>FLOAT<a class="headerlink" href="#float" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="syntax.html#literal-float-values"><span class="std std-ref">Literal FLOAT Values</span></a> for syntax.</p>
<p>Starting in <a class="reference external" href="https://github.com/zeroSteiner/rule-engine/releases/tag/v3.0.0">v3.0.0</a>, the <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> datatype is backed by Python’s <a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> object. This
makes the evaluation of arithmetic more intuitive for the audience of rule authors who are not assumed to be familiar
with the nuances of binary floating point arithmetic. To take an example from the <a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#module-decimal" title="(in Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> documentation, rule
authors should not have to know that <code class="docutils literal notranslate"><span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span> <span class="pre">-</span> <span class="pre">0.3</span> <span class="pre">!=</span> <span class="pre">0</span></code>.</p>
<p>Internally, Rule Engine conversion values from Python <a class="reference external" href="https://docs.python.org/3.11/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> and <a class="reference external" href="https://docs.python.org/3.11/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> objects to
<a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> using their string representation (as provided by <a class="reference external" href="https://docs.python.org/3.11/library/functions.html#repr" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a>) <strong>and not</strong>
<a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal.from_float" title="(in Python v3.11)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_float()</span></code></a>. This is to ensure that a Python <a class="reference external" href="https://docs.python.org/3.11/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> value of <code class="docutils literal notranslate"><span class="pre">0.1</span></code> that is
provided by an input will match a Rule Engine literal of <code class="docutils literal notranslate"><span class="pre">0.1</span></code>. To explicitly pass a binary floating point value, the
caller must convert it using <a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal.from_float" title="(in Python v3.11)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_float()</span></code></a> themselves. To change the behavior of the floating
point arithmetic, a <a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Context" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Context</span></code></a> can be specified by the <a class="reference internal" href="rule_engine/engine.html#rule_engine.engine.Context" title="rule_engine.engine.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> object.</p>
<p>Since Python’s <a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> values are not always equivalent to themselves (e.g.
<code class="docutils literal notranslate"><span class="pre">0.1</span> <span class="pre">!=</span> <span class="pre">Decimal('0.1')</span></code>) it’s important to know that Rule Engine will coerce and normalize these values. That means
that while in Python <code class="docutils literal notranslate"><span class="pre">0.1</span> <span class="pre">in</span> <span class="pre">[</span> <span class="pre">Decimal('0.1')</span> <span class="pre">]</span></code> will evaluate to <code class="docutils literal notranslate"><span class="pre">False</span></code>, in a rule it will evaluate to <code class="docutils literal notranslate"><span class="pre">True</span></code>
(e.g. <code class="docutils literal notranslate"><span class="pre">Rule('0.1</span> <span class="pre">in</span> <span class="pre">numbers').evaluate({'numbers':</span> <span class="pre">[Decimal('0.1')]})</span></code>). This also affects Python dictionaries that
are converted to Rule Engine <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a> values. While in Python the value
<code class="docutils literal notranslate"><span class="pre">{0.1:</span> <span class="pre">'a',</span> <span class="pre">Decimal('0.1'):</span> <span class="pre">'a'}</span></code> would have a length of 2 with two unique keys, the same value once converted into a
Rule Engine <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.MAPPING" title="rule_engine.types.DataType.MAPPING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MAPPING</span></code></a> would have a length of 1 with a single unique key. For this reason, developers
using Rule Engine should take care to not use compound data types with a mix of Python <a class="reference external" href="https://docs.python.org/3.11/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> and
<a class="reference external" href="https://docs.python.org/3.11/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> values.</p>
</section>
<section id="function">
<h2>FUNCTION<a class="headerlink" href="#function" title="Permalink to this heading"></a></h2>
<p>Version <a class="reference external" href="https://github.com/zeroSteiner/rule-engine/releases/tag/v4.0.0">v4.0.0</a> added the <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.FUNCTION" title="rule_engine.types.DataType.FUNCTION"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FUNCTION</span></code></a> datatype. This can be used to make functions available
to rule authors. Rule Engine contains a few <a class="reference internal" href="syntax.html#builtin-functions"><span class="std std-ref">builtin functions</span></a> that can be used by default.
Additional functions can be either added them to the evaluated object or by extending the builtin symbols. It is only
possible to call a function from within the rule text. Functions can not be defined as other data types can be.</p>
</section>
<section id="timedelta">
<h2>TIMEDELTA<a class="headerlink" href="#timedelta" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="syntax.html#literal-timedelta-values"><span class="std std-ref">Literal TIMEDELTA Values</span></a> for syntax.</p>
<p>Version <a class="reference external" href="https://github.com/zeroSteiner/rule-engine/releases/tag/v3.5.0">v3.5.0</a> introduced the <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.TIMEDELTA" title="rule_engine.types.DataType.TIMEDELTA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TIMEDELTA</span></code></a> datatype, backed by Python’s
<a class="reference external" href="https://docs.python.org/3.11/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> class. This also comes with the ability to perform arithmetic with both
<a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.TIMEDELTA" title="rule_engine.types.DataType.TIMEDELTA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TIMEDELTA</span></code></a> <em>and</em> <a class="reference internal" href="rule_engine/types.html#rule_engine.types.DataType.DATETIME" title="rule_engine.types.DataType.DATETIME"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DATETIME</span></code></a> values. This allows you to create rules for things
such as “has it been 30 days since this thing happened?” or “how much time passed between two events?”.</p>
<p>The following mathematical operations are supported:</p>
<ul class="simple">
<li><p>Adding a timedelta to a datetime (result is a datetime)</p></li>
<li><p>Adding a timedelta to another timedelta (result is a timedelta)</p></li>
<li><p>Subtracting a timedelta from a datetime (result is a datetime)</p></li>
<li><p>Subtracting a datetime from another datetime (result is a timedelta)</p></li>
<li><p>Subtracting a timedelta from another timedelta (result is a timedelta)</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="syntax.html" class="btn btn-neutral float-left" title="Rule Syntax" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="attributes.html" class="btn btn-neutral float-right" title="Data Attributes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Spencer McIntyre.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>